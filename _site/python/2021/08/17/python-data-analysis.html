<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" href="/img/favicon_io/favicon-16x16.png">
  

  <title>
    Ecommerce Data Analysis - Simplifying Complexity
    
  </title>

  <meta name="description" content="¬°Hola! üëã">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300;1,400&display=swap" rel="stylesheet"> 
  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://joseluistello.github.io/python/2021/08/17/python-data-analysis.html">
  <link rel="alternate" type="application/rss+xml" title="Simplifying Complexity" href="/feed.xml">

</head>


<body>  

  
  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">
    
      <img src="/img/favicon_io/favicon-32x32.png" alt="">
    </a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://joseluistello.substack.com">Library</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/img/ecommerce/fondo3.png')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Ecommerce Data Analysis</h1>
            
            <h2 class="subheading">Looking for insights with Python, Pandas & Matplotlib</h2>
            
            <span class="meta">Posted by
              <a href="#">Jose Luis Tello</a>
              on August 17, 2021 &middot; <span class="reading-time" title="Estimated read time">
  
   18 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <h4 id="hola-">¬°Hola! üëã</h4>

<p>Este es un proyecto especial, por primera vez escribire en espa√±ol. Empezare con un analisis donde detallare cada uno de mis pasos. Lo hare con datos que tome del canal <a href="https://www.youtube.com/channel/UCSW-_m4KXiok4Hq2nK97atw">A2 Capacitaci√≥n: Excel</a>, que por cierto recomiendo si quieren aprender Excel.</p>

<p>Hace tiempo escribi un articulo (que esta incompleto) sobre <a href="https://joseluistello.github.io/r/2021/07/12/data-analysis-process.html">mi proceso para analizar datos</a>, la idea detras de este approach es abordar el analisis a traves de diferentes etapas. Estas etapas buscan estandarizar la manera en que analizo cualquier tipo de dataset.</p>

<p>El outcome de mi proceso consiste en priorizar la legibilidad de mi analisis abordando cada etapa de forma separada (m√°s no aislada). Al final del d√≠a lo que busco es entender la relacion entre mis variables y encontrar un path entre las observaciones dentro de mis datos.</p>

<p>Empecemos por cargar las librerias que ocupare y el dataset que descargue.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s">'data/Datos.csv'</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="p">{</span>
        <span class="s">"Orden"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s">"Medio"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Vendedor"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Plataforma"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Tipo_Orden"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Tipo_Cliente"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Categor√≠a"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Producto"</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s">"Precio"</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
</code></pre></div></div>

<p>La raz√≥n del porque esribi as√≠ el upload del archivo se debe a que es m√°s facil editar el tipo de dato antes de, que despues de.</p>

<p>Por ejemplo, as√≠ tendriamos que modificarlo despues de:</p>

<ul>
  <li>df[‚ÄúPrecio‚Äù] = pd.to_numeric(df[‚ÄúPrecio‚Äù])</li>
</ul>

<p>Ahora es tiempo de dos cosas:</p>

<ol>
  <li>Colocar un limite al maximo de filas que se muestran en cada return</li>
  <li>Establecer un default para el tama√±o de los plots</li>
</ol>

<p>Sugiero utilizar estos parametros para la comodidad de tu analisis. El siguiente codigo establece limites en el display de las filas y controla el tama√±o de las graficas que creas.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### Este codigo limita las filas de una columna ###
</span><span class="n">pd</span><span class="p">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">"display.max_rows"</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>

<span class="c1">### Este codigo establece un parametro de los plots en ancho y alto ###
</span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'figure.figsize'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="entendiendo-las-variables">Entendiendo las variables</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 63221 entries, 0 to 63220
Data columns (total 12 columns):
 #   Column        Non-Null Count  Dtype 
---  ------        --------------  ----- 
 0   Orden         63221 non-null  int32 
 1   Fecha         63221 non-null  object
 2   Medio         63221 non-null  object
 3   Vendedor      63221 non-null  object
 4   Plataforma    63221 non-null  object
 5   Comision      63221 non-null  object
 6   Tipo_Orden    63221 non-null  object
 7   Tipo_Cliente  63221 non-null  object
 8   Sexo          63221 non-null  object
 9   Categor√≠a     63221 non-null  object
 10  Producto      63221 non-null  object
 11  Precio        63221 non-null  int32 
dtypes: int32(2), object(10)
memory usage: 5.3+ MB
</code></pre></div></div>

<p>Primero debemos entender a que nos enfrentamos. El hecho de hacer preguntas como:</p>
<ul>
  <li>¬øSon cualitativas o cuantitativas?</li>
  <li>
    <p>¬øSon continuas o categorias? 
Nos ayuda a tener una idea de como abordar un analisis. Empecemos por explicar la ciasificaci√≥n de las variables.</p>
  </li>
  <li>Los datos categoricos responden a preguntas como ‚Äúqu√©‚Äù, ‚Äúquienes‚Äù, o ‚Äúdonde‚Äù, y se clasifican en tres grupos:
    <ul>
      <li>Datos nominales
        <ul>
          <li>No tienen un orden (Paises)</li>
        </ul>
      </li>
      <li>Datos ordinales
        <ul>
          <li>Tienen un orden (Grado de quemadura)</li>
        </ul>
      </li>
      <li>Datos binarios (dicotomicos)
        <ul>
          <li>Solo tienen dos niveles (Genero)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Los datos cuantitativos responden a preguntas como ‚Äúcu√°ntos‚Äù, ‚Äúcu√°nto‚Äù o con ‚Äúqu√©‚Äù frecuencia, y se clasifican en dos grupos:
    <ul>
      <li>Datos discretos - No tienen decimales
        <ul>
          <li>Se pueden clasificar</li>
          <li>Pueden ser ordinales (1ra, 2da, 3ra clase)</li>
          <li>Pueden ser binarios (Vivo o muerto 1/0)</li>
          <li>Pueden ser intervalios o ratios (Temperaturas)</li>
        </ul>
      </li>
      <li>Datos continuos - Tienen decimales
        <ul>
          <li>Lo mismo de arriba</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>La clasificaci√≥n de nuestro dataset quedar√≠a as√≠:</p>

<ul>
  <li>Datos Categoricos
    <ul>
      <li>Medio</li>
      <li>Vendedor</li>
      <li>Plataforma</li>
      <li>Tipo_Orden</li>
      <li>Tipo_Cliente</li>
      <li>Sexo</li>
      <li>Categoia</li>
      <li>Producto</li>
    </ul>
  </li>
  <li>Datos Continuos
    <ul>
      <li>Fecha</li>
      <li>Comision</li>
      <li>Precio</li>
    </ul>
  </li>
</ul>

<h3 id="analizando-las-variables">Analizando las variables</h3>

<p>Una de las cosas que me gusta hacer antes de buscar patrones es aislar variables. Este aislamiento me permite generar pistas acerca del dataset. Puedo ver el peso de cada variable, su distribuci√≥n, sus rangos, las desviaciones que tiene, etc.</p>

<p>Por ejemplo, puedo aislar la variable de Sexo.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Sexo"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mujeres    35937
Hombre     27284
Name: Sexo, dtype: int64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Sexo"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> <span class="s">'%'</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mujeres    56.8%
Hombre     43.2%
Name: Sexo, dtype: object
</code></pre></div></div>

<p>Ahora se que existe una mayor√≠a de mujeres dentro de mi set, lo cual me da se√±ales que planeo ir guardando. Pensemoslo de esta manera:
Ir directo a enteder la relacion entre plataformas/ventas/sexo puede salir mal (o no), existe la posibilidad de sesgar mis pensamientos en torno a un resultado. 
Puedo concluir en que se debe invertir dinero en tal plataforma porque esto atraera ‚ÄòX‚Äô clientes hombres. Cuando tal vez, existan mejores lugares para poner el dinero.</p>

<p><strong>Por cierto</strong>, tratare de emular las pipelines del tidyverse. Por ello escribo el codigo en vertical. Me parece que es mas legible de esa manera!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Plataforma"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">+</span> <span class="s">'%'</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Instagram    53.6%
Youtube      17.5%
Facebook     15.4%
Website      13.5%
Name: Plataforma, dtype: object
</code></pre></div></div>

<p>Lo que nos arroja este resultado es el total de observaciones que presento cada plataforma. Esto quiere decir (hasta ahora) que Instagram es la que m√°s unidades vende, pero eso no significa que sea la que m√°s revenue genere.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Vendedor"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">+</span> <span class="s">'%'</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Publicidad Insta      20.0%
Directo en Tienda     13.5%
Publicidad Face        9.4%
Publicidad Youtube     7.9%
karlagvzcia            4.5%
                      ...  
geogluisovec           0.5%
gypseajain             0.5%
nicole.izuristilo      0.5%
anacsimdao             0.3%
andreaheraz            0.3%
Name: Vendedor, Length: 44, dtype: object
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">"Vendedor"</span><span class="p">].</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'r'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="s">'vertical'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span>
</code></pre></div></div>

<p><img src="/img/ecommerce/output1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Tipo_Cliente"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Repetido    32561
Nuevo       30660
Name: Tipo_Cliente, dtype: int64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Tipo_Orden"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">+</span> <span class="s">'%'</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Compra        91.0%
Devolucion     9.0%
Name: Tipo_Orden, dtype: object
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Comision"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0%     32150
30%    12807
20%     6702
10%     5872
40%     5690
Name: Comision, dtype: int64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span><span class="p">[</span><span class="s">"Medio"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">+</span> <span class="s">'%'</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Propio        50.9%
Influencer    49.1%
Name: Medio, dtype: object
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span> 
<span class="n">df</span><span class="p">[</span><span class="s">"Precio"</span><span class="p">]</span>
    <span class="p">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>count    63221.0
mean        40.7
std         13.6
min         10.0
25%         34.0
50%         40.0
75%         50.0
max        100.0
Name: Precio, dtype: float64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PrecioDist</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">histplot</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span> 
    <span class="n">x</span><span class="o">=</span><span class="s">"Precio"</span><span class="p">,</span>
    <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> 
    <span class="n">kde</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">PrecioDist</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">"Precio de los productos"</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">PrecioDist</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">"Volumen de productos"</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/img/ecommerce/output2.png" alt="png" /></p>

<p>Bueno, ya se puso interesante la cosa. Hasta ahora hemos aprendido:</p>
<ol>
  <li>El volumen de ventas es dominado por Instagram, lejos de Youtube, Facebook y el Website</li>
  <li>Las mujeres representan el 56.8% de las observaciones mientras que los hombres tienen el 43.2%</li>
  <li>El 55.3% de las ventas se concentra en 5 vendedores y el 42.9% en 3</li>
  <li>Hay 44 vendedores ‚Äúafiliados‚Äù a la compa√±ia, me parecen muchos. Me causa algo de ruido.</li>
  <li>Tienen ‚Äúbuena‚Äù retencion y lo coloco entre comillas ya que bien puede desplozarme despues de que un repetido compro, o sea que no hubo una tercera vez.</li>
  <li>Hubo pocas devoluciones comparado a sus compras, 9% comparado con un 91%</li>
  <li>Existen 5 tipos de comisiones donde la mayoria se concentra entre el 0% y 30%</li>
  <li>El precio de los productos tiene un de 10 pesos y un maximo 100 pesos donde la mayoria de los productos se concentra entre los 20 y 50 pesos</li>
</ol>

<h5 id="es-tiempo-de-entender-las-relaciones-entre-nuestas-variables">Es tiempo de entender las relaciones entre nuestas variables.</h5>

<p>El aislamiento ya dio muchas pistas as√≠ que es tiempo de parar. He llegado al punto donde es necesario contar con un plan de ataque pues de lo contrario terminare perdiendome. Tengo muchas preguntas, desde saber donde se concentran las comisiones y porque, hasta entender de donde viene realmente el crecimiento.</p>

<p>Pensemoslo un poco, si las comisiones del 40% se concentran en un rango de precio elevado (100) , tendriamos un dropeo del revenue del 40 pesos. A los 60 pesos restantes todav√≠a tenemos que agregarle mas costos fijos y variables. 
La empresa puede estar perdiendo dinero sin siquiera notarlo.</p>

<p>Se que estoy limitado por paradigmas, esquemas y modelos pero en otro contexto esto podr√≠a ser cierto. Mucho ojo.</p>

<p>Si no fui muy claro, dejame que te lo explique de esta manera. En este punto debemos comenzar a preguntarnos que es lo que queremos lograr y como una variable depende o se relaciona con la otra, y el como podemos sacar el maximo provecho de eso. Algo as√≠ como esto:</p>

<p><img src="/img/ecommerce/dependencies.png" alt="png" /></p>

<p>Mmmmm, voy a utilizar un approach top-down. Esto significa que ire desde arriba hac√≠a abajo explorando cada relacion que este en mi cabeza con un rumbo definido.</p>

<p>Listo pues, ahora que todo quedo claro es tiempo de comenzar.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bx</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                  <span class="n">x</span><span class="o">=</span><span class="s">"Medio"</span><span class="p">,</span>
                  <span class="n">hue</span><span class="o">=</span><span class="s">'Sexo'</span><span class="p">,</span>
                  <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">bx</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Distribucion por genero"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">bx</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">"Canal"</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">bx</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">"Numero de unidades vendidas"</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/img/ecommerce/output3.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span>
 <span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'Sexo'</span><span class="p">)[</span><span class="s">'Precio'</span><span class="p">]</span>
 <span class="p">.</span><span class="nb">sum</span><span class="p">()</span>
 <span class="p">.</span><span class="n">reset_index</span><span class="p">()</span>
 <span class="p">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s">'Precio'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sexo</th>
      <th>Precio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Mujeres</td>
      <td>1380627</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Hombre</td>
      <td>1191223</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">df</span>
 <span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'Sexo'</span><span class="p">,</span> <span class="s">'Plataforma'</span><span class="p">])</span>
 <span class="p">[</span><span class="s">'Precio'</span><span class="p">]</span>
 <span class="p">.</span><span class="nb">sum</span><span class="p">()</span>
 <span class="p">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s">'Sexo'</span><span class="p">)</span>
 <span class="p">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s">'Sexo'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sexo</th>
      <th>Precio</th>
    </tr>
    <tr>
      <th>Plataforma</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Facebook</th>
      <td>Mujeres</td>
      <td>213132</td>
    </tr>
    <tr>
      <th>Instagram</th>
      <td>Mujeres</td>
      <td>741824</td>
    </tr>
    <tr>
      <th>Website</th>
      <td>Mujeres</td>
      <td>188001</td>
    </tr>
    <tr>
      <th>Youtube</th>
      <td>Mujeres</td>
      <td>237670</td>
    </tr>
    <tr>
      <th>Facebook</th>
      <td>Hombre</td>
      <td>182941</td>
    </tr>
    <tr>
      <th>Instagram</th>
      <td>Hombre</td>
      <td>637018</td>
    </tr>
    <tr>
      <th>Website</th>
      <td>Hombre</td>
      <td>159314</td>
    </tr>
    <tr>
      <th>Youtube</th>
      <td>Hombre</td>
      <td>211950</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">displot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> 
            <span class="n">x</span><span class="o">=</span><span class="s">"Precio"</span><span class="p">,</span> 
            <span class="n">col</span><span class="o">=</span><span class="s">"Plataforma"</span><span class="p">,</span> 
            <span class="n">row</span><span class="o">=</span><span class="s">"Sexo"</span><span class="p">,</span> 
            <span class="n">binwidth</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> 
            <span class="n">height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> 
            <span class="n">facet_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">margin_titles</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
</code></pre></div></div>

<p><img src="/img/ecommerce/output4.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">displot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> 
            <span class="n">x</span><span class="o">=</span><span class="s">"Tipo_Cliente"</span><span class="p">,</span> 
            <span class="n">col</span><span class="o">=</span><span class="s">'Medio'</span><span class="p">,</span>
            <span class="n">row</span><span class="o">=</span><span class="s">"Sexo"</span><span class="p">,</span> 
            <span class="n">binwidth</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> 
            <span class="n">height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> 
            <span class="n">facet_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">margin_titles</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
</code></pre></div></div>

<p><img src="/img/ecommerce/output5.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">displot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> 
            <span class="n">x</span><span class="o">=</span><span class="s">"Tipo_Orden"</span><span class="p">,</span> 
            <span class="n">col</span><span class="o">=</span><span class="s">"Plataforma"</span><span class="p">,</span> 
            <span class="n">row</span><span class="o">=</span><span class="s">"Sexo"</span><span class="p">,</span> 
            <span class="n">binwidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> 
            <span class="n">height</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> 
            <span class="n">facet_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">margin_titles</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
</code></pre></div></div>

<p><img src="/img/ecommerce/output6.png" alt="png" /></p>

<p>Ok, los volumenes de ventas en el punto de aislamiento no estaban fuera de la realidad. 
Es hora de recapitular lo que sabemos:</p>
<ol>
  <li>Los dos generos compran m√°s por canal propio, esto quiere decir Website y adveriting de la compa√±ia en las diferentes plataformas</li>
  <li>Las mujeres compraron 1,380,627 pesos mientras que los hombres compraron 1,191,223 pesos, una diferencia del 14%</li>
  <li>Las plataformas m√°s revenue genero entre las mujeres (en orden) fueron:
    <ul>
      <li>Instagram con 741,824 pesos</li>
      <li>Youtube, Facebook y el Website acumularon un revenue de 638,803 pesos</li>
    </ul>
  </li>
  <li>Los hombres siguieron el mismo patron de revenue:
    <ul>
      <li>Instagram con 637,018</li>
      <li>Youtube, Facebook y el Website acumularon un revenue de 554,205 pesos</li>
    </ul>
  </li>
  <li>El histograma de la plataforma pareciese que arroja cosas interesantes pero en realidad, los huecos que vemos en la fila de hombres es simplemente el reflejo de la diferencia en el revenue. Los hombres compraron menos, por ende, no se vendieron los mismos productos que con las mujeres.</li>
  <li>Los medios propios retienen a los clientes mientras que los influencers atraen nuevos clientes</li>
  <li>La mayor√≠a de las devoluciones se encuentra en Instagram</li>
</ol>



        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/r/2021/08/09/datavisualization-medals-tokyo2021.html" data-toggle="tooltip" data-placement="top" title="Data Visualization Olympic Medals 2021">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/python/2021/09/04/financial-api.html" data-toggle="tooltip" data-placement="top" title="Working with API Rest and JSON">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:joluistello@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Jose Luis Tello 2021</p>
      </div>
    </div>
  </div>
</footer>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>





  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXXX-X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-XXXXXXXXX-X');
</script>



</body>

</html>
